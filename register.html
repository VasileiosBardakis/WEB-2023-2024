<!DOCTYPE html>
<html lang="en">
<head>
    <title>Saviors Inc. - Register</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <style>
    </style>
</head>

<body>
    <nav class="navbar navbar-default nav-background">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="register.html">

                    <!--
                        <img
                      src=""
                      alt="My logo"
                      class="headerLogo"
                    />
                     -->
                    <div style="font-size: 3rem">Saviors Inc.</div>
                </a>
            </div>
        </div>
    </nav>

    <div class="register">
        <h1>Register</h1>
        <form action="/register" method="post">
            <label for="username"></label>
            <input type="text" name="username" placeholder="Username" id="username" required>

            <label for="password"></label>
            <input type="password" name="password" placeholder="Password" id="password" required>

            <button type="button" onclick="register()">Register</button>
            <a href="/">Login</a>
            <div id="error-message"></div>



            <script>
                function register() {
                    var username = document.getElementById('username').value;
                    var password = document.getElementById('password').value;
                    var errorMessageElement = document.getElementById('error-message');

                    var xhttp = new XMLHttpRequest();
                    xhttp.open('POST', '/register', true);
                    xhttp.setRequestHeader('Content-Type', 'application/json');

                    xhttp.onreadystatechange = function () {
                        if (xhttp.readyState === 4) {
                            if (xhttp.status === 401) {
                                // Handle incorrect username/password with AJAX
                                var response = JSON.parse(xhttp.responseText);
                                errorMessageElement.innerHTML = response.error;
                            } else if (xhttp.status === 200) {
                                // Redirect on successful login if needed
                                window.location.href = '/auth';
                            }
                        }
                    };

                    var data = JSON.stringify({ username: username, password: password });
                    xhttp.send(data);
                }
            </script>
        </form>
    </div>

</body>
</html>
